# ODCRæœ¬åœ°ç®¡ç†å·¥å…·

Amazon EC2 On-Demand Capacity Reservation (ODCR) æœ¬åœ°è‡ªåŠ¨åŒ–ç®¡ç†å·¥å…·ï¼Œæ”¯æŒæ™ºèƒ½æ‹†åˆ†è´­ä¹°å’Œå®æ—¶è¿›åº¦æ˜¾ç¤ºã€‚

## ğŸ”— ç›¸å…³é¡¹ç›®
- **AWSæ‰˜ç®¡ç‰ˆæœ¬**: [ODCR-AWS-Serverless](https://github.com/lcwang/ODCR-AWS-Serverless) - åŸºäºStep Functionså’ŒLambdaçš„ä¼ä¸šçº§è§£å†³æ–¹æ¡ˆ

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–
```bash
pip install -r requirements.txt
```

### 2. é…ç½®AWSå‡­è¯
```bash
aws configure
```

### 3. è¿è¡Œå·¥å…·
```bash
# åˆ›å»º10å°r7i.metal-24xlå®ä¾‹
python odcr_manager.py create --instance-type r7i.metal-24xl --availability-zone us-west-2a --count 10

# åˆ›å»º20å°m5.largeå®ä¾‹ï¼Œè¶…æ—¶30åˆ†é’Ÿ
python odcr_manager.py create --instance-type m5.large --availability-zone us-west-2a --count 20 --timeout 30

# æ‰©å®¹ç°æœ‰ODCRï¼Œå¢åŠ 10å°å®ä¾‹
python odcr_manager.py expand --odcr-id cr-xxxxxxxxx --count 10

# æ‰©å®¹ç°æœ‰ODCRï¼Œå¢åŠ 20å°å®ä¾‹ï¼Œè¶…æ—¶30åˆ†é’Ÿ
python odcr_manager.py expand --odcr-id cr-xxxxxxxxx --count 20 --timeout 30
```

## æ ¸å¿ƒç‰¹æ€§

- âœ… **åŒæ¨¡å¼æ“ä½œ**: æ”¯æŒåˆ›å»ºæ–°ODCRå’Œæ‰©å®¹ç°æœ‰ODCR
- âœ… **æ™ºèƒ½æ‰©å®¹**: ä¼˜å…ˆæ‰©å®¹ç°æœ‰ODCRï¼Œæœ€å°åŒ–ODCRæ•°é‡
- âœ… **æ‹†åˆ†è´­ä¹°**: å®¹é‡ä¸è¶³æ—¶è‡ªåŠ¨é™çº§é‡è¯• (10â†’5â†’2â†’1)
- âœ… **å®æ—¶è¿›åº¦**: åŠ¨æ€æ˜¾ç¤ºæ‰§è¡ŒçŠ¶æ€å’Œå€’è®¡æ—¶
- âœ… **çŠ¶æ€æ›´æ–°**: æ¯30ç§’æ˜¾ç¤ºè¯¦ç»†è¿›åº¦æŠ¥å‘Š
- âœ… **ä¼˜é›…ä¸­æ–­**: æ”¯æŒCtrl+Cä¸­æ–­æ‰§è¡Œ

## å‚æ•°è¯´æ˜

### create å‘½ä»¤
- `--instance-type`: å®ä¾‹ç±»å‹ (å¿…éœ€)
- `--availability-zone`: å¯ç”¨åŒº (å¿…éœ€)  
- `--count`: ç›®æ ‡å®ä¾‹æ•°é‡ (å¿…éœ€)
- `--preference`: å®¹é‡åå¥½ (open/targeted, é»˜è®¤open)
- `--timeout`: è¶…æ—¶æ—¶é—´åˆ†é’Ÿæ•° (é»˜è®¤60)
- `--region`: AWSåŒºåŸŸ (é»˜è®¤us-west-2)

### expand å‘½ä»¤
- `--odcr-id`: è¦æ‰©å®¹çš„ODCR ID (å¿…éœ€)
- `--count`: å¢åŠ çš„å®ä¾‹æ•°é‡ (å¿…éœ€)
- `--timeout`: è¶…æ—¶æ—¶é—´åˆ†é’Ÿæ•° (é»˜è®¤60)
- `--region`: AWSåŒºåŸŸ (é»˜è®¤us-west-2)

## å·¥ä½œåŸç†

### åˆ›å»ºæ–°ODCRæ¨¡å¼
1. **é¦–æ¬¡è´­ä¹°**: åˆ›å»ºæ–°ODCR
2. **åç»­è´­ä¹°**: ä¼˜å…ˆæ‰©å®¹æœ€åä¸€ä¸ªODCR
3. **æ‰©å®¹å¤±è´¥**: å°è¯•åˆ›å»ºæ–°ODCR
4. **æ‹†åˆ†è´­ä¹°**: å®¹é‡ä¸è¶³æ—¶è‡ªåŠ¨å‡åŠé‡è¯•
5. **æŒç»­é‡è¯•**: ç›´åˆ°è¾¾åˆ°ç›®æ ‡æˆ–è¶…æ—¶

### æ‰©å®¹ç°æœ‰ODCRæ¨¡å¼
1. **è·å–å½“å‰å®¹é‡**: æŸ¥è¯¢ODCRå½“å‰çŠ¶æ€
2. **å°è¯•æ‰©å®¹**: æŒ‰ç›®æ ‡æ•°é‡å¢åŠ å®¹é‡
3. **æ‹†åˆ†è´­ä¹°**: å®¹é‡ä¸è¶³æ—¶è‡ªåŠ¨å‡åŠé‡è¯•
4. **æŒç»­é‡è¯•**: ç›´åˆ°è¾¾åˆ°ç›®æ ‡æˆ–è¶…æ—¶

è¯¦ç»†æ–‡æ¡£è¯·æŸ¥çœ‹ `ä½¿ç”¨æŒ‡å—.md`
